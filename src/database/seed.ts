import { PrismaClient } from '@prisma/client';
import bcrypt from 'bcryptjs';
import { logger } from '@/utils/logger';

const prisma = new PrismaClient();

// Dados das 18 provÃ­ncias de Angola
const provincesData = [
  {
    name: 'Luanda',
    code: 'LDA',
    capital: 'Luanda',
    population: '8.3 milhÃµes',
    area: '18.826 kmÂ²',
    density: '441 hab/kmÂ²',
    region: 'Norte',
    timezone: 'WAT (UTC+1)',
    currency: 'Kwanza (AOA)',
    language: 'PortuguÃªs',
    religion: 'Cristianismo',
    government: 'Provincial',
    chiefAdministrator: 'Governador',
    areaCode: '222',
    postalCode: '1000-9999',
    latitude: -8.8390,
    longitude: 13.2894,
  },
  {
    name: 'HuÃ­la',
    code: 'HUI',
    capital: 'Lubango',
    population: '2.8 milhÃµes',
    area: '79.023 kmÂ²',
    density: '35 hab/kmÂ²',
    region: 'Sul',
    timezone: 'WAT (UTC+1)',
    currency: 'Kwanza (AOA)',
    language: 'PortuguÃªs',
    religion: 'Cristianismo',
    government: 'Provincial',
    chiefAdministrator: 'Governador',
    areaCode: '261',
    postalCode: '2000-2999',
    latitude: -14.9177,
    longitude: 13.4925,
  },
  {
    name: 'Benguela',
    code: 'BEN',
    capital: 'Benguela',
    population: '2.2 milhÃµes',
    area: '31.788 kmÂ²',
    density: '69 hab/kmÂ²',
    region: 'Centro',
    timezone: 'WAT (UTC+1)',
    currency: 'Kwanza (AOA)',
    language: 'PortuguÃªs',
    religion: 'Cristianismo',
    government: 'Provincial',
    chiefAdministrator: 'Governador',
    areaCode: '244',
    postalCode: '3000-3999',
    latitude: -12.5763,
    longitude: 13.4055,
  },
  {
    name: 'Huambo',
    code: 'HUA',
    capital: 'Huambo',
    population: '2.0 milhÃµes',
    area: '34.274 kmÂ²',
    density: '58 hab/kmÂ²',
    region: 'Centro',
    timezone: 'WAT (UTC+1)',
    currency: 'Kwanza (AOA)',
    language: 'PortuguÃªs',
    religion: 'Cristianismo',
    government: 'Provincial',
    chiefAdministrator: 'Governador',
    areaCode: '241',
    postalCode: '4000-4999',
    latitude: -12.7761,
    longitude: 15.7390,
  },
  {
    name: 'Cabinda',
    code: 'CAB',
    capital: 'Cabinda',
    population: '716 mil',
    area: '7.283 kmÂ²',
    density: '98 hab/kmÂ²',
    region: 'Norte',
    timezone: 'WAT (UTC+1)',
    currency: 'Kwanza (AOA)',
    language: 'PortuguÃªs',
    religion: 'Cristianismo',
    government: 'Provincial',
    chiefAdministrator: 'Governador',
    areaCode: '231',
    postalCode: '5000-5999',
    latitude: -5.5506,
    longitude: 12.1972,
  },
  {
    name: 'Zaire',
    code: 'ZAI',
    capital: 'Mbanza Kongo',
    population: '594 mil',
    area: '40.130 kmÂ²',
    density: '15 hab/kmÂ²',
    region: 'Norte',
    timezone: 'WAT (UTC+1)',
    currency: 'Kwanza (AOA)',
    language: 'PortuguÃªs',
    religion: 'Cristianismo',
    government: 'Provincial',
    chiefAdministrator: 'Governador',
    areaCode: '232',
    postalCode: '6000-6999',
    latitude: -6.2670,
    longitude: 14.2401,
  },
  {
    name: 'UÃ­ge',
    code: 'UIG',
    capital: 'UÃ­ge',
    population: '1.5 milhÃµes',
    area: '58.698 kmÂ²',
    density: '26 hab/kmÂ²',
    region: 'Norte',
    timezone: 'WAT (UTC+1)',
    currency: 'Kwanza (AOA)',
    language: 'PortuguÃªs',
    religion: 'Cristianismo',
    government: 'Provincial',
    chiefAdministrator: 'Governador',
    areaCode: '233',
    postalCode: '7000-7999',
    latitude: -7.6089,
    longitude: 15.0613,
  },
  {
    name: 'Cuanza Norte',
    code: 'CNO',
    capital: 'Ndalatando',
    population: '443 mil',
    area: '24.110 kmÂ²',
    density: '18 hab/kmÂ²',
    region: 'Norte',
    timezone: 'WAT (UTC+1)',
    currency: 'Kwanza (AOA)',
    language: 'PortuguÃªs',
    religion: 'Cristianismo',
    government: 'Provincial',
    chiefAdministrator: 'Governador',
    areaCode: '234',
    postalCode: '8000-8999',
    latitude: -9.2978,
    longitude: 14.9116,
  },
  {
    name: 'Cuanza Sul',
    code: 'CSU',
    capital: 'Sumbe',
    population: '1.9 milhÃµes',
    area: '55.660 kmÂ²',
    density: '34 hab/kmÂ²',
    region: 'Centro',
    timezone: 'WAT (UTC+1)',
    currency: 'Kwanza (AOA)',
    language: 'PortuguÃªs',
    religion: 'Cristianismo',
    government: 'Provincial',
    chiefAdministrator: 'Governador',
    areaCode: '235',
    postalCode: '9000-9999',
    latitude: -11.2027,
    longitude: 13.8417,
  },
  {
    name: 'Malanje',
    code: 'MAL',
    capital: 'Malanje',
    population: '986 mil',
    area: '98.302 kmÂ²',
    density: '10 hab/kmÂ²',
    region: 'Norte',
    timezone: 'WAT (UTC+1)',
    currency: 'Kwanza (AOA)',
    language: 'PortuguÃªs',
    religion: 'Cristianismo',
    government: 'Provincial',
    chiefAdministrator: 'Governador',
    areaCode: '236',
    postalCode: '10000-10999',
    latitude: -9.5407,
    longitude: 16.3346,
  },
  {
    name: 'Lunda Norte',
    code: 'LNO',
    capital: 'Dundo',
    population: '862 mil',
    area: '102.783 kmÂ²',
    density: '8 hab/kmÂ²',
    region: 'Norte',
    timezone: 'WAT (UTC+1)',
    currency: 'Kwanza (AOA)',
    language: 'PortuguÃªs',
    religion: 'Cristianismo',
    government: 'Provincial',
    chiefAdministrator: 'Governador',
    areaCode: '237',
    postalCode: '11000-11999',
    latitude: -7.4167,
    longitude: 20.8333,
  },
  {
    name: 'Lunda Sul',
    code: 'LSU',
    capital: 'Saurimo',
    population: '537 mil',
    area: '77.637 kmÂ²',
    density: '7 hab/kmÂ²',
    region: 'Norte',
    timezone: 'WAT (UTC+1)',
    currency: 'Kwanza (AOA)',
    language: 'PortuguÃªs',
    religion: 'Cristianismo',
    government: 'Provincial',
    chiefAdministrator: 'Governador',
    areaCode: '238',
    postalCode: '12000-12999',
    latitude: -9.6589,
    longitude: 20.3939,
  },
  {
    name: 'Moxico',
    code: 'MOX',
    capital: 'Luena',
    population: '758 mil',
    area: '223.023 kmÂ²',
    density: '3 hab/kmÂ²',
    region: 'Centro',
    timezone: 'WAT (UTC+1)',
    currency: 'Kwanza (AOA)',
    language: 'PortuguÃªs',
    religion: 'Cristianismo',
    government: 'Provincial',
    chiefAdministrator: 'Governador',
    areaCode: '239',
    postalCode: '13000-13999',
    latitude: -11.7881,
    longitude: 19.9062,
  },
  {
    name: 'BiÃ©',
    code: 'BIE',
    capital: 'Kuito',
    population: '1.4 milhÃµes',
    area: '70.314 kmÂ²',
    density: '20 hab/kmÂ²',
    region: 'Centro',
    timezone: 'WAT (UTC+1)',
    currency: 'Kwanza (AOA)',
    language: 'PortuguÃªs',
    religion: 'Cristianismo',
    government: 'Provincial',
    chiefAdministrator: 'Governador',
    areaCode: '240',
    postalCode: '14000-14999',
    latitude: -12.1900,
    longitude: 16.9400,
  },
  {
    name: 'Cuando Cubango',
    code: 'CCU',
    capital: 'Menongue',
    population: '534 mil',
    area: '199.049 kmÂ²',
    density: '3 hab/kmÂ²',
    region: 'Sul',
    timezone: 'WAT (UTC+1)',
    currency: 'Kwanza (AOA)',
    language: 'PortuguÃªs',
    religion: 'Cristianismo',
    government: 'Provincial',
    chiefAdministrator: 'Governador',
    areaCode: '262',
    postalCode: '15000-15999',
    latitude: -14.6581,
    longitude: 17.6906,
  },
  {
    name: 'Namibe',
    code: 'NAM',
    capital: 'Namibe',
    population: '495 mil',
    area: '57.091 kmÂ²',
    density: '9 hab/kmÂ²',
    region: 'Sul',
    timezone: 'WAT (UTC+1)',
    currency: 'Kwanza (AOA)',
    language: 'PortuguÃªs',
    religion: 'Cristianismo',
    government: 'Provincial',
    chiefAdministrator: 'Governador',
    areaCode: '263',
    postalCode: '16000-16999',
    latitude: -15.1961,
    longitude: 12.1522,
  },
  {
    name: 'Cunene',
    code: 'CUN',
    capital: 'Ondjiva',
    population: '990 mil',
    area: '87.342 kmÂ²',
    density: '11 hab/kmÂ²',
    region: 'Sul',
    timezone: 'WAT (UTC+1)',
    currency: 'Kwanza (AOA)',
    language: 'PortuguÃªs',
    religion: 'Cristianismo',
    government: 'Provincial',
    chiefAdministrator: 'Governador',
    areaCode: '264',
    postalCode: '17000-17999',
    latitude: -16.8333,
    longitude: 15.7500,
  },
];

// Dados de alguns municÃ­pios principais (exemplo)
const municipalitiesData = [
  // Luanda
  {
    name: 'Luanda',
    code: 'LDA001',
    provinceCode: 'LDA',
    population: '2.8 milhÃµes',
    area: '2.257 kmÂ²',
    density: '1.241 hab/kmÂ²',
    region: 'Norte',
    timezone: 'WAT (UTC+1)',
    currency: 'Kwanza (AOA)',
    language: 'PortuguÃªs',
    religion: 'Cristianismo',
    government: 'Municipal',
    chiefAdministrator: 'Administrador',
    areaCode: '222',
    postalCode: '1000-1999',
    latitude: -8.8390,
    longitude: 13.2894,
  },
  {
    name: 'Cazenga',
    code: 'LDA002',
    provinceCode: 'LDA',
    population: '1.2 milhÃµes',
    area: '37 kmÂ²',
    density: '32.432 hab/kmÂ²',
    region: 'Norte',
    timezone: 'WAT (UTC+1)',
    currency: 'Kwanza (AOA)',
    language: 'PortuguÃªs',
    religion: 'Cristianismo',
    government: 'Municipal',
    chiefAdministrator: 'Administrador',
    areaCode: '222',
    postalCode: '2000-2999',
    latitude: -8.8500,
    longitude: 13.3000,
  },
  {
    name: 'Viana',
    code: 'LDA003',
    provinceCode: 'LDA',
    population: '1.0 milhÃ£o',
    area: '1.000 kmÂ²',
    density: '1.000 hab/kmÂ²',
    region: 'Norte',
    timezone: 'WAT (UTC+1)',
    currency: 'Kwanza (AOA)',
    language: 'PortuguÃªs',
    religion: 'Cristianismo',
    government: 'Municipal',
    chiefAdministrator: 'Administrador',
    areaCode: '222',
    postalCode: '3000-3999',
    latitude: -8.9000,
    longitude: 13.2500,
  },
  // HuÃ­la
  {
    name: 'Lubango',
    code: 'HUI001',
    provinceCode: 'HUI',
    population: '1.0 milhÃ£o',
    area: '3.140 kmÂ²',
    density: '319 hab/kmÂ²',
    region: 'Sul',
    timezone: 'WAT (UTC+1)',
    currency: 'Kwanza (AOA)',
    language: 'PortuguÃªs',
    religion: 'Cristianismo',
    government: 'Municipal',
    chiefAdministrator: 'Administrador',
    areaCode: '261',
    postalCode: '2000-2999',
    latitude: -14.9177,
    longitude: 13.4925,
  },
  // Benguela
  {
    name: 'Benguela',
    code: 'BEN001',
    provinceCode: 'BEN',
    population: '600 mil',
    area: '2.100 kmÂ²',
    density: '286 hab/kmÂ²',
    region: 'Centro',
    timezone: 'WAT (UTC+1)',
    currency: 'Kwanza (AOA)',
    language: 'PortuguÃªs',
    religion: 'Cristianismo',
    government: 'Municipal',
    chiefAdministrator: 'Administrador',
    areaCode: '244',
    postalCode: '3000-3999',
    latitude: -12.5763,
    longitude: 13.4055,
  },
];

async function main() {
  try {
    logger.info('ðŸŒ± Iniciando seed do banco de dados...');

    // Clear existing data
    await prisma.municipality.deleteMany();
    await prisma.province.deleteMany();
    await prisma.user.deleteMany();

    logger.info('ðŸ—‘ï¸ Dados existentes removidos');

    // Create provinces
    logger.info('ðŸ›ï¸ Criando provÃ­ncias...');
    for (const provinceData of provincesData) {
      await prisma.province.create({
        data: provinceData,
      });
    }
    logger.info(`âœ… ${provincesData.length} provÃ­ncias criadas`);

    // Create municipalities
    logger.info('ðŸ˜ï¸ Criando municÃ­pios...');
    for (const municipalityData of municipalitiesData) {
      await prisma.municipality.create({
        data: municipalityData,
      });
    }
    logger.info(`âœ… ${municipalitiesData.length} municÃ­pios criados`);

    // Create admin user
    logger.info('ðŸ‘¤ Criando usuÃ¡rio administrador...');
    const hashedPassword = await bcrypt.hash('admin123', 12);
    await prisma.user.create({
      data: {
        name: 'Administrador',
        email: 'admin@angola-localization.com',
        password: hashedPassword,
        role: 'ADMIN',
        isActive: true,
      },
    });
    logger.info('âœ… UsuÃ¡rio administrador criado (admin@angola-localization.com / admin123)');

    // Create owner user
    logger.info('ðŸ‘‘ Criando usuÃ¡rio proprietÃ¡rio...');
    await prisma.user.create({
      data: {
        name: 'ProprietÃ¡rio',
        email: 'owner@angola-localization.com',
        password: hashedPassword,
        role: 'OWNER',
        isActive: true,
      },
    });
    logger.info('âœ… UsuÃ¡rio proprietÃ¡rio criado (owner@angola-localization.com / admin123)');

    logger.info('ðŸŽ‰ Seed concluÃ­do com sucesso!');
  } catch (error) {
    logger.error('âŒ Erro durante o seed:', error);
    throw error;
  } finally {
    await prisma.$disconnect();
  }
}

// Run seed if this file is executed directly
if (require.main === module) {
  main()
    .catch((error) => {
      console.error(error);
      process.exit(1);
    });
}

export { main as seed };
